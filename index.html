<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ã¿ã¿ã¡ã‚ƒã‚“å ã„</title>
<style>
  :root{
    --pink:#ff89b5; --hotpink:#ff4fa1; --bg:#fff6fb; --ink:#333;
    --card:#ffffff; --shadow:0 10px 25px rgba(255,79,161,.25);
  }
  *{box-sizing:border-box}
  body{
    margin:0; font-family: "Hiragino Kaku Gothic ProN", "Yu Gothic", "Meiryo", system-ui, -apple-system, sans-serif;
    background: radial-gradient(1200px 600px at 80% -10%, #ffe3f1 0%, transparent 60%),
                radial-gradient(1000px 500px at -10% 110%, #ffeaf6 0%, transparent 60%), var(--bg);
    color:var(--ink); display:flex; min-height:100svh; align-items:center; justify-content:center; padding:24px;
  }
  .app{
    width:min(720px, 100%); background:var(--card); border-radius:24px; box-shadow:var(--shadow);
    padding:24px 22px 28px; position:relative; overflow:hidden;
  }
  .ribbon{
    position:absolute; inset:auto -40px 18px auto; transform:rotate(12deg);
    background:linear-gradient(135deg,#ffd9ec,var(--pink)); color:#a4005a; padding:6px 22px; border-radius:12px; font-weight:700;
    box-shadow:0 6px 18px rgba(255,105,180,.35);
  }
  h1{
    margin:8px 0 12px; text-align:center; font-size:clamp(22px,4vw,28px); color:var(--hotpink);
  }
  p.lead{ text-align:center; margin:0 0 18px; opacity:.8 }
  .controls{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; margin:16px 0 20px }
  button{
    border:0; border-radius:999px; padding:12px 18px; font-size:16px; cursor:pointer; transition:transform .04s ease, filter .2s;
    box-shadow:0 6px 14px rgba(0,0,0,.06);
  }
  .primary{ background:var(--hotpink); color:#fff }
  .ghost{ background:#fff; color:var(--hotpink); border:2px solid var(--hotpink) }
  button:active{ transform:translateY(1px) scale(.99) }
  .grid{
    display:grid; gap:12px;
    grid-template-columns: repeat(12,1fr);
  }
  .card{
    background:#fff; border:1px solid #ffe5f1; border-radius:16px; padding:14px 16px; box-shadow:0 6px 16px rgba(255,79,161,.08);
  }
  .w12{grid-column:span 12}
  .w6{grid-column:span 12}
  @media (min-width:720px){ .w6{grid-column:span 6} }
  .title{font-weight:700; color:#a4005a; margin-bottom:6px; display:flex; align-items:center; gap:8px}
  .big{ font-size:clamp(22px,4.6vw,34px); line-height:1.2 }
  .tags{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px }
  .tag{ padding:6px 10px; background:#fff0f7; border:1px dashed #ffc2df; border-radius:999px; font-size:13px }
  .muted{opacity:.8}
  .footer{ text-align:center; margin-top:18px; font-size:12px; opacity:.7 }
</style>
</head>
<body>
  <div class="app" role="application" aria-live="polite">
    <span class="ribbon">mimi-chan âœ¦ fortune</span>
    <h1>ã¿ã¿ã¡ã‚ƒã‚“å ã„ ğŸ€</h1>
    <p class="lead">ã€Œå ã†ã€ã‚’æŠ¼ã™ã¨ã€ç·åˆé‹ãƒ»æ‹æ„›ãƒ»ä»•äº‹ãƒ»é‡‘é‹ãƒ»ãƒ©ãƒƒã‚­ãƒ¼ã‚«ãƒ©ãƒ¼ãƒ»ãƒ©ãƒƒã‚­ãƒ¼ã‚¢ã‚¤ãƒ†ãƒ ãƒ»é–‹é‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹ãŒå‡ºã¾ã™ã€‚</p>

    <div class="controls">
      <button class="primary" id="drawBtn">å ã† âœ¨</button>
      <button class="ghost" id="againBtn" disabled>ã‚‚ã†ä¸€å›å¼•ã</button>
      <button class="ghost" id="shareBtn" disabled>çµæœã‚’ã‚·ã‚§ã‚¢</button>
    </div>

    <div class="grid" id="resultArea" hidden>
      <section class="card w12">
        <div class="title">ğŸ“œ ä»Šæ—¥ã®é‹å‹¢ï¼ˆã ã„ã˜ï¼‰</div>
        <div id="total" class="big">â€”</div>
        <div class="tags" id="stars"></div>
      </section>

      <section class="card w6">
        <div class="title">ğŸ’• æ‹æ„›é‹</div>
        <div id="love">â€”</div>
      </section>
      <section class="card w6">
        <div class="title">ğŸ’¼ ä»•äº‹é‹</div>
        <div id="work">â€”</div>
      </section>

      <section class="card w6">
        <div class="title">ğŸ’° é‡‘é‹</div>
        <div id="money">â€”</div>
      </section>
      <section class="card w6">
        <div class="title">ğŸ¯ ãƒ©ãƒƒã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒˆ</div>
        <div class="tags" id="lucky"></div>
      </section>

      <section class="card w12">
        <div class="title">ğŸª„ é–‹é‹ã‚¢ãƒ‰ãƒã‚¤ã‚¹</div>
        <div id="advice" class="muted">â€”</div>
      </section>
    </div>

    <div class="footer">Â© mimi-chan uranai</div>
  </div>

<script>
(() => {
  // â˜… åŸºæœ¬ãƒ‡ãƒ¼ã‚¿ï¼ˆå¥½ã¿ã«åˆã‚ã›ã¦å¢—ã‚„ã›ã¾ã™ï¼‰
  const TOTAL = [
    ["å¤§å‰","æœ€é«˜ã®æ³¢ï¼æ€ã„åˆ‡ã‚Šæ¥½ã—ã‚“ã§ğŸŒˆ"],
    ["ä¸­å‰","ã„ã„é¢¨ãŒå¹ãæ—¥ã€‚å‹•ã‘ã°ãƒãƒ£ãƒ³ã‚¹ğŸŒŸ"],
    ["å°å‰","å°ã•ãªå–œã³ãŒç©ã¿ä¸ŠãŒã‚‹æ—¥ğŸ€"],
    ["å‰","ç©ã‚„ã‹ã€‚ä¸å¯§ã«éã”ã—ã¦ğŸŒ¸"],
    ["æœ«å‰","ç„¦ã‚‰ãšæº–å‚™ã«ã¾ã‚ã™ã¨â—"],
    ["å‡¶","ç„¡ç†ã›ãšã‚»ãƒ¼ãƒ–ã€å®ˆã‚Šã®æ—¥ğŸ«¶"]
  ];

  const LOVE = [
    "ç¬‘é¡”ã®æŒ¨æ‹¶ãŒç¸ã‚’å¼•ãå¯„ã›ã‚‹ã‚ˆã€‚",
    "é€£çµ¡ã¯çŸ­ãä¸å¯§ã«ã€‚ä¼šè©±ã®ã‚­ãƒ£ãƒƒãƒãƒœãƒ¼ãƒ«ã‚’æ„è­˜ã€‚",
    "ç”˜ãˆã™ãæ³¨æ„ã€‚æ„Ÿè¬ã®ä¸€è¨€ã‚’å¿˜ã‚Œãšã«ã€‚",
    "ä¸€ç·’ã«é£Ÿã¹ã‚‹æ¸©ã‹ã„ã‚‚ã®ãŒæ„›ã‚’æ·±ã‚ã‚‹ã€‚",
    "æ€ã„è¾¼ã¿ã‚’å¤–ã—ã¦ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹ã«å¯„ã‚Šæ·»ã†ã¨â—ã€‚",
    "é¡ã‚’è¦‹ã‚‹å›æ•°ï¼ãƒ¢ãƒ†åº¦UPã®åˆå›³ã€‚"
  ];

  const WORK = [
    "åˆå‰ä¸­ãŒå‹è² ã€‚å…ˆã«é‡ã„ã‚¿ã‚¹ã‚¯ã‹ã‚‰ï¼",
    "ãƒ¡ãƒ¢é­”ã«ãªã‚ã†ã€‚æ®µå–ã‚Šã§æ—ã‚‹æ—¥ã€‚",
    "é ¼ã‚‰ã‚Œã‚‹ã“ã¨ã§è©•ä¾¡UPã€‚ã²ã¨å£°ã‹ã‘ã¦æ‰‹ä¼ã„ã‚’ã€‚",
    "ãƒã‚§ãƒƒã‚¯ã®é¬¼ã«ãªã£ã¦ãƒŸã‚¹å›é¿ã€‚",
    "å°ã•ãªæ”¹å–„ææ¡ˆãŒé€šã‚Šã‚„ã™ã„ã€‚",
    "è³‡æ–™ã®ä½™ç™½ã‚’æ•´ãˆã‚‹ã ã‘ã§ä¼ã‚ã‚Šæ–¹ãŒæ¿€å¤‰ã€‚"
  ];

  const MONEY = [
    "ãƒã‚¤ãƒ³ãƒˆæ´»ç”¨ã§å¾—ã™ã‚‹æ—¥ã€‚å¿…è¦ãªç‰©ã ã‘ã«â—",
    "å€¤å¼•ãã‚ˆã‚Šâ€œé•·ãä½¿ãˆã‚‹ã‹â€ã§åˆ¤æ–­ã‚’ã€‚",
    "ç¾é‡‘ã‚’å°‘ã—å¤šã‚ã«æŒã¤ã¨å®‰å¿ƒã€‚",
    "ã‚µãƒ–ã‚¹ã‚¯ã®è¦‹ç›´ã—ãƒãƒ£ãƒ³ã‚¹ï¼",
    "è²·ã†ã‚ˆã‚Šå€Ÿã‚Šã‚‹ãƒ»ã‚·ã‚§ã‚¢ãŒå‰ã€‚",
    "å¯„ä»˜ã‚„å·®ã—å…¥ã‚Œã§å·¡ã‚Šå·¡ã£ã¦è¿”ã£ã¦ãã‚‹ã€‚"
  ];

  const COLORS = ["ã•ãã‚‰ãƒ”ãƒ³ã‚¯","ãƒŸãƒ³ãƒˆã‚°ãƒªãƒ¼ãƒ³","ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼","ç©ºè‰²","ãƒŸãƒ«ã‚¯ãƒ›ãƒ¯ã‚¤ãƒˆ","ã‚³ãƒ¼ãƒ©ãƒ«","ãƒãƒ‹ãƒ¼ã‚¤ã‚¨ãƒ­ãƒ¼","ãƒã‚¤ãƒ“ãƒ¼","ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ã‚´ãƒ¼ãƒ«ãƒ‰","ã‚¢ã‚¤ã‚¹ã‚°ãƒ¬ãƒ¼"];
  const ITEMS  = ["ãƒãƒ³ã‚«ãƒ","å°ã•ãªé¡","ãŠèŒ¶","ã‚¤ãƒ¤ãƒ›ãƒ³","ãƒšãƒ³","ã‚¢ãƒ­ãƒ","æ¸©ã‹ã„é£²ã¿ç‰©","ãƒã‚¹ã‚¯ã‚±ãƒ¼ã‚¹","é£´ã¡ã‚ƒã‚“","ç›®è–¬","ã‚¹ãƒˆãƒ¬ãƒƒãƒ","ã‚¹ãƒãƒ›ã®å†™çœŸæ•´ç†"];
  const SPOTS  = ["æœã®å…‰","ç·‘ã®è¦‹ãˆã‚‹å ´æ‰€","é™ã‹ãªè§’å¸­","æœ¬å±‹ã•ã‚“","ç¥ç¤¾ã®é³¥å±…","ã‚«ãƒ•ã‚§ã®çª“éš›","ãã‚Œã„ãªãƒˆã‚¤ãƒ¬","é§…ã®ãƒ›ãƒ¼ãƒ ã®ç«¯","è¿‘æ‰€ã®å…¬åœ’","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼å‰ã§æ·±å‘¼å¸"];

  const ADVICES = [
    "â€œ3å›æ·±å‘¼å¸â†’å¾®ç¬‘ã‚€â€ã§é‹ã®æµã‚ŒãŒæ•´ã†ã‚ˆã€‚",
    "ã‚„ã‚‹ã“ã¨ã‚’3ã¤ã ã‘æ›¸ãå‡ºã—ã¦ã€çµ‚ã‚ã£ãŸã‚‰å°ã•ãã‚¬ãƒƒãƒ„ãƒãƒ¼ã‚ºã€‚",
    "å§¿å‹¢ã‚’1cmã ã‘ä¼¸ã°ã™ã€‚ä¸–ç•Œã®è¦‹ãˆæ–¹ãŒå¤‰ã‚ã‚‹ã€‚",
    "ã‚¯ãƒ­ãƒ¼ã‚ºãƒ‰ãªé´ã‚ˆã‚Šã€è¶³å…ƒã®æ¸…æ½”æ„Ÿã«æ°—ã‚’é…ã£ã¦ã€‚",
    "ãŠç¤¼ã¯â€œå…·ä½“ï¼‹å³â€ã€‚ç›¸æ‰‹ã®åå‰ã‚’æ·»ãˆã‚‹ã¨æœ€å¼·ã€‚",
    "15åˆ†ã®æ•£æ­©ã§ã‚¢ã‚¤ãƒ‡ã‚¢æ¹§ãã€‚æ­©ããªãŒã‚‰å¤ªé™½ã‚’è¦‹ã‚‹ã€‚"
  ];

  // â˜… ä¹±æ•°ãƒ˜ãƒ«ãƒ‘
  const pick = arr => arr[Math.floor(Math.random()*arr.length)];
  const range = n => [...Array(n).keys()];

  // â˜… è¡¨ç¤ºè¦ç´ 
  const $ = sel => document.querySelector(sel);
  const area   = $("#resultArea");
  const btn    = $("#drawBtn");
  const again  = $("#againBtn");
  const share  = $("#shareBtn");

  function draw(){
    area.hidden = false;

    // ç·åˆ
    const [rank, msg] = pick(TOTAL);
    $("#total").textContent = `${rank}ã€€${msg}`;

    // æ˜Ÿï¼ˆå¤§å‰=5 â˜…ã€â€¦ ã®ã‚ˆã†ã«éŠã³å¿ƒï¼‰
    const starsWrap = $("#stars");
    starsWrap.innerHTML = "";
    const level = { "å¤§å‰":5, "ä¸­å‰":4, "å°å‰":3, "å‰":3, "æœ«å‰":2, "å‡¶":1 }[rank] || 3;
    range(level).forEach(()=> {
      const t = document.createElement("span"); t.className="tag"; t.textContent="â˜…";
      starsWrap.appendChild(t);
    });

    // å„é‹å‹¢
    $("#love").textContent  = pick(LOVE);
    $("#work").textContent  = pick(WORK);
    $("#money").textContent = pick(MONEY);

    // ãƒ©ãƒƒã‚­ãƒ¼æƒ…å ±ï¼ˆã‚«ãƒ©ãƒ¼/ã‚¢ã‚¤ãƒ†ãƒ /ã‚¹ãƒãƒƒãƒˆã‚’3ã¤ï¼‰
    const luckyWrap = $("#lucky");
    luckyWrap.innerHTML = "";
    [ ["ğŸ¨ è‰²", pick(COLORS)], ["ğŸ ç‰©", pick(ITEMS)], ["ğŸ“ å ´æ‰€", pick(SPOTS)] ].forEach(([label, val])=>{
      const tag = document.createElement("span");
      tag.className="tag"; tag.textContent = `${label}: ${val}`;
      luckyWrap.appendChild(tag);
    });

    // ã‚¢ãƒ‰ãƒã‚¤ã‚¹
    $("#advice").textContent = pick(ADVICES);

    again.disabled = false;
    share.disabled = false;
  }

  btn.addEventListener("click", draw);
  again.addEventListener("click", draw);

  share.addEventListener("click", async () => {
    const text = `ã¿ã¿ã¡ã‚ƒã‚“å ã„ğŸ€\n${$("#total").textContent}\n`
      + `ğŸ’• ${$("#love").textContent}\nğŸ’¼ ${$("#work").textContent}\nğŸ’° ${$("#money").textContent}\n`
      + `ğŸª„ ${$("#advice").textContent}\n`;
    // Web Share APIï¼ˆå¯¾å¿œãƒ–ãƒ©ã‚¦ã‚¶ãªã‚‰ã‚·ã‚§ã‚¢ã€æœªå¯¾å¿œãªã‚‰ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ï¼‰
    if (navigator.share) {
      try{ await navigator.share({text}); }catch(e){}
    } else if (navigator.clipboard) {
      await navigator.clipboard.writeText(text);
      alert("çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚SNSã«è²¼ã‚Šä»˜ã‘ã¦ã‚·ã‚§ã‚¢ã§ãã¾ã™âœ¨");
    } else {
      prompt("çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ã£ã¦ãã ã•ã„ğŸ‘‡", text);
    }
  });
})();
</script>
</body>
</html>
