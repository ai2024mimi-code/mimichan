<script>
/* === ã¿ã¿ã¡ã‚ƒã‚“å ã„ï¼šå®‰å®šç‰ˆï¼ˆå¿…ãš window.draw ã‚’å®šç¾©ï¼‰ === */
(function(){
  const pick = a => a[Math.floor(Math.random()*a.length)];
  const range = n => [...Array(n).keys()];

  const TOTAL = [
    ["å¤§å‰","é¡˜ã„ãŒå®Ÿã‚‹ã‚µã‚¤ãƒ³ã€‚å¤§èƒ†ã«ã„ã“ã†ğŸŒˆ"],
    ["å¤§å‰","ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒå™›ã¿åˆã†æ—¥ã€‚ç›´æ„Ÿã«å¾“ã£ã¦âœ¨"],
    ["ä¸­å‰","è‚©ã®åŠ›ãŒæŠœã‘ã¦å®ŸåŠ›ç™ºæ®ã€‚ç¬‘é¡”ã§â—"],
    ["ä¸­å‰","å‹•ã‘ã°ãƒãƒ£ãƒ³ã‚¹ãŒå¢—ãˆã‚‹ã€‚å°ã•ãä¸€æ­©ğŸŒŸ"],
    ["å°å‰","å°ã•ãªãƒ©ãƒƒã‚­ãƒ¼ãŒç©ã¿é‡ãªã‚‹æ—¥ğŸ€"],
    ["å°å‰","ã‚³ãƒ„ã‚³ãƒ„ãŒå®Ÿã‚’çµã¶ã€‚ä¸å¯§ãŒéµã€‚"],
    ["å‰","ç©ã‚„ã‹ã«æ•´ã†ã€‚åŸºæœ¬ã«å¿ å®Ÿã«ğŸŒ¸"],
    ["å‰","ç¸ãŒåºƒãŒã‚‹ã€‚æŒ¨æ‹¶ã¨ãŠç¤¼ã‚’å¤§åˆ‡ã«ã€‚"],
    ["æœ«å‰","ä»Šæ—¥ã¯æ•´ãˆã‚‹æ—¥ã€‚ç¡çœ ã¨æ „é¤Šã‚’å°‘ã—å¤šã‚ã«ã€‚"],
    ["æœ«å‰","ç„¦ã‚‰ãšæº–å‚™ã€‚ä¸‹ã”ã—ã‚‰ãˆãŒæœªæ¥ã‚’è»½ãã™ã‚‹â—"],
    ["å‡¶","å®ˆã‚Šã®æ—¥ã€‚æ—©ã‚ã®æ’¤é€€ãŒå‹ã¡ğŸ«¶"],
    ["å‡¶","é™è¦³ãŒè³¢ã„é¸æŠã€‚è‡ªå·±ã‚±ã‚¢ã«æ™‚é–“ã‚’ã€‚"]
  ];
  const LOVE = ["ç¬‘é¡”ã®æŒ¨æ‹¶ãŒç¸ã‚’å¼•ãå¯„ã›ã‚‹ã‚ˆã€‚","è¿”ä¿¡ã¯çŸ­ãä¸å¯§ã«ã€‚ç›¸æ‰‹ã®ãƒšãƒ¼ã‚¹å°Šé‡â—","ç”˜ãˆã™ãæ³¨æ„ã€‚ã¾ãšâ€œã‚ã‚ŠãŒã¨ã†â€ã€‚","æ¸©ã‹ã„é£²ã¿ç‰©ã‚’ã”ä¸€ç·’ã«ã€‚è·é›¢ãŒç¸®ã¾ã‚‹ã€‚","æ€ã„è¾¼ã¿ã‚’å¤–ã—ã¦è¦³å¯Ÿã™ã‚‹ã¨ç™ºè¦‹ãŒã€‚","é¡ã‚’è¦‹ã‚‹å›æ•°ï¼é­…åŠ›åº¦UPã®ã‚µã‚¤ãƒ³ã€‚","ä»Šæ—¥ã¯â€œèãå½¹â€ã«å›ã‚‹ã¨å¥½æ„Ÿåº¦UPã€‚","é«ªã‚’æ•´ãˆã‚‹ã ã‘ã§å°è±¡ãŒ3å‰²å¤‰ã‚ã‚‹ï¼","ä¼šãˆãªãã¦ã‚‚ä¸å¯§ãªä¸€è¨€ã§å®‰å¿ƒæ„Ÿã‚’ã€‚","éå»ã‚ˆã‚Šâ€œä»Šãªã«ã‚’ã™ã‚‹ã‹â€ã‚’è©±é¡Œã«ã€‚","æŸ”ã‚‰ã‹ãªé¦™ã‚ŠãŒæ­¦å™¨ã€‚åŒ‚ã„ã‚±ã‚¢â—","ãƒ©ãƒƒã‚­ãƒ¼è‰²ã‚’èº«ã«ã¤ã‘ã¦å‡ºä¼šã„é‹UPã€‚","å¢ƒç•Œç·šã¯ã‚„ã•ã—ãæ˜ç¢ºã«ã€‚ç„¡ç†ã—ãªã„ã€‚","â€œã¾ãŸä»Šåº¦ã­â€ã®ç´„æŸã‚’å…·ä½“çš„ãªæ—¥ã«ã€‚"];
  const WORK = ["åˆå‰ä¸­ãŒå‹è² ã€‚é‡ã„ã‚¿ã‚¹ã‚¯ã‹ã‚‰å…ˆã«ï¼","ãƒ¡ãƒ¢é­”ã§æ®µå–ã‚Šè‰¯ãã€‚ãƒã‚§ãƒƒã‚¯ã¯äºŒé‡ã§â—","é ¼ã‚‰ã‚Œã‚‹ã“ã¨ã§è©•ä¾¡UPã€‚ã²ã¨å£°ã‹ã‘ã‚‹ã€‚","æå‡ºå‰ã«â€œä½™ç™½â€ã‚’æ•´ãˆã‚‹ã¨ä¼ã‚ã‚Šåº¦UPã€‚","å°ã•ãªæ”¹å–„ææ¡ˆãŒé€šã‚Šã‚„ã™ã„æ—¥ã€‚","ToDoã‚’3ã¤ã«çµã‚‹ã¨é›†ä¸­ã§ãã‚‹ã€‚","å ±å‘Šã¯â€œçµè«–â†’ç†ç”±â†’ãŠé¡˜ã„â€ã§æ™‚çŸ­ã€‚","å§¿å‹¢ã‚’1cmä¼¸ã°ã™ã¨é›†ä¸­åŠ›ãŒæˆ»ã‚‹ã‚ˆã€‚","æ–°è¦ã‚ˆã‚Šæ—¢å­˜ã®ç£¨ãè¾¼ã¿ãŒå‰ã€‚","è³‡æ–™ã¯å›³è§£1æšã‚ã‚‹ã¨åˆºã•ã‚‹ã€‚","æ—©æ­©ãç§»å‹•ï¼è„³ãŒå†´ãˆã‚‹ãƒ–ãƒ¼ã‚¹ãƒˆã€‚","ç· åˆ‡ã®30åˆ†å‰ã‚’â€œæœ¬å½“ã®ç· åˆ‡â€ã«è¨­å®šã€‚","ãƒ¡ãƒ¼ãƒ«ã®ä»¶åã‚’å…·ä½“ã«â†’å³ãƒ¬ã‚¹ç‡UPã€‚","5åˆ†ã ã‘ç€æ‰‹ã§ã‚¨ãƒ³ã‚¸ãƒ³ã‚’ã‹ã‘ã‚‹ã€‚"];
  const MONEY = ["ãƒã‚¤ãƒ³ãƒˆæ´»ç”¨ã§å¾—ã™ã‚‹æ—¥ã€‚å¿…è¦ãªç‰©ã ã‘ã«â—","â€œå®‰ã„â€ã‚ˆã‚Šâ€œé•·ãä½¿ãˆã‚‹â€åŸºæº–ã§é¸ã¶ã¨å‰ã€‚","ç¾é‡‘ã‚’å°‘ã—å¤šã‚ã«æŒã¤ã¨å®‰å¿ƒæ„ŸãŒé•ã†ã€‚","ã‚µãƒ–ã‚¹ã‚¯ã®è¦‹ç›´ã—ãƒãƒ£ãƒ³ã‚¹ï¼","è²·ã†ã‚ˆã‚Šå€Ÿã‚Šã‚‹ãƒ»ã‚·ã‚§ã‚¢ãŒå‰ã€‚","å·®ã—å…¥ã‚ŒãŒå·¡ã‚Šå·¡ã£ã¦è¿”ã£ã¦ãã‚‹ã€‚","ä¾¡æ ¼æ¯”è¼ƒã¯1åº—èˆ—å¢—ã‚„ã™ã ã‘ã§å¤‰ã‚ã‚‹ã€‚","è²¡å¸ƒã®ãƒ¬ã‚·ãƒ¼ãƒˆæ•´ç†ã§é‡‘é‹æ•´ã†ã€‚","è‡ªè²©æ©Ÿã¯ä»Šæ—¥ã¯1å›ã¾ã§ã€‚ãƒ¡ãƒªãƒãƒªâ—","å†·è”µåº«â€œä½¿ã„åˆ‡ã‚Šâ€ã§è‡¨æ™‚åå…¥æ°—åˆ†ã€‚","æ¬²ã—ã„ã‚‚ã®ã¯â€œ48æ™‚é–“ãƒ«ãƒ¼ãƒ«â€ã§åˆ¤æ–­ã€‚","å›ºå®šè²»ã®å¹´1è¦‹ç›´ã—ãƒ¡ãƒ¢ã‚’ã‚»ãƒƒãƒˆã€‚","Payã®ãƒã‚¤ãƒ³ãƒˆäº¤æ›å¿˜ã‚Œã«ã”ç”¨å¿ƒã€‚","ã‚¯ãƒ¼ãƒãƒ³ã¯æœŸé™å‰ã«æ£šå¸ã—ã€‚"];
  const COLORS = ["ã•ãã‚‰ãƒ”ãƒ³ã‚¯","ãƒŸãƒ³ãƒˆã‚°ãƒªãƒ¼ãƒ³","ãƒ©ãƒ™ãƒ³ãƒ€ãƒ¼","ç©ºè‰²","ãƒŸãƒ«ã‚¯ãƒ›ãƒ¯ã‚¤ãƒˆ","ã‚³ãƒ¼ãƒ©ãƒ«","ãƒãƒ‹ãƒ¼ã‚¤ã‚¨ãƒ­ãƒ¼","ãƒã‚¤ãƒ“ãƒ¼","ã‚·ãƒ£ãƒ³ãƒ‘ãƒ³ã‚´ãƒ¼ãƒ«ãƒ‰","ã‚¢ã‚¤ã‚¹ã‚°ãƒ¬ãƒ¼","ãƒ©ã‚¤ãƒ©ãƒƒã‚¯","ãƒšãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¸ãƒ¥","ãƒã‚§ãƒªãƒ¼ãƒ¬ãƒƒãƒ‰","ãƒ‘ã‚¦ãƒ€ãƒ¼ãƒ–ãƒ«ãƒ¼"];
  const ITEMS  = ["ãƒãƒ³ã‚«ãƒ","å°ã•ãªé¡","ãŠèŒ¶","ã‚¤ãƒ¤ãƒ›ãƒ³","ãƒšãƒ³","ã‚¢ãƒ­ãƒ","æ¸©ã‹ã„é£²ã¿ç‰©","ãƒã‚¹ã‚¯ã‚±ãƒ¼ã‚¹","é£´ã¡ã‚ƒã‚“","ç›®è–¬","ãƒ¢ãƒã‚¤ãƒ«ãƒãƒƒãƒ†ãƒªãƒ¼","ãƒãƒ³ãƒ‰ã‚¯ãƒªãƒ¼ãƒ ","ãƒ˜ã‚¢ã‚´ãƒ ","ãƒªãƒƒãƒ—","ãƒŸãƒ‹ãƒãƒ¼ãƒˆ","ãƒ†ã‚£ãƒƒã‚·ãƒ¥ã‚±ãƒ¼ã‚¹"];
  const SPOTS  = ["æœã®å…‰","ç·‘ã®è¦‹ãˆã‚‹å ´æ‰€","é™ã‹ãªè§’å¸­","æœ¬å±‹ã•ã‚“","ç¥ç¤¾ã®é³¥å±…","ã‚«ãƒ•ã‚§ã®çª“éš›","ãã‚Œã„ãªãƒˆã‚¤ãƒ¬","é§…ãƒ›ãƒ¼ãƒ ã®ç«¯","è¿‘æ‰€ã®å…¬åœ’","ã‚¨ãƒ¬ãƒ™ãƒ¼ã‚¿ãƒ¼å‰ã§æ·±å‘¼å¸","éšæ®µã®è¸Šã‚Šå ´","å›³æ›¸é¤¨ã®å…¥å£ä»˜è¿‘","èŠ±ãŒé£¾ã‚‰ã‚ŒãŸå ´æ‰€","ãƒ™ãƒ³ãƒã®æ—¥ãªãŸ"];
  const ADVICES = ["â€œ3å›æ·±å‘¼å¸â†’å¾®ç¬‘ã‚€â€ã§é‹ã®æµã‚ŒãŒæ•´ã†ã‚ˆã€‚","ã‚„ã‚‹ã“ã¨ã‚’3ã¤ã ã‘æ›¸ãå‡ºã—ã€çµ‚ãˆãŸã‚‰å°ã•ãã‚¬ãƒƒãƒ„ãƒãƒ¼ã‚ºã€‚","å§¿å‹¢ã‚’1cmã ã‘ä¼¸ã°ã™ã€‚ä¸–ç•Œã®è¦‹ãˆæ–¹ãŒå¤‰ã‚ã‚‹ã€‚","ãŠç¤¼ã¯â€œå…·ä½“ï¼‹å³â€ã€‚ç›¸æ‰‹ã®åå‰ã‚’æ·»ãˆã‚‹ã¨æœ€å¼·ã€‚","15åˆ†ã®æ•£æ­©ã§ã‚¢ã‚¤ãƒ‡ã‚¢æ¹§ãã€‚å¤ªé™½ã‚’æµ´ã³ã‚ˆã†ã€‚","ã‚¹ãƒãƒ›å†™çœŸã‚’10æšæ¶ˆã™ã¨é ­ãŒè»½ããªã‚‹ã€‚","é´ã‚’æ‹­ãï¼ç£¨ãã¨è¶³å–ã‚Šã¾ã§è»½ãã€‚","æœºã®è§’ã‚’1ç®‡æ‰€ã ã‘ç‰‡ã¥ã‘ã‚‹â†’æ³¢åŠåŠ¹æœâ—","â€œä»Šæ—¥ã¯ã“ã“ã¾ã§ã§OKâ€ã‚’è‡ªåˆ†ã«è¨±å¯ã™ã‚‹ã€‚","ç´™ã«â€œã‚ã‚ŠãŒã¨ã†â€ã‚’æ›¸ãã¨æµã‚ŒãŒè‰¯ããªã‚‹ã€‚","æ¹¯èˆ¹5åˆ†ã ã‘ã§ã‚‚æ°—åˆ†ãŒæ•´ã†ã€‚","æ¸©ã‹ã„é£²ã¿ç‰©ã§å¿ƒã‚’æˆ»ã™ã€‚"];
  const SPECIAL = {
    good: ["éå»ã®ç—›ã¿ã‚’æŠ±ãˆãŸã¾ã¾ã§ã‚‚å¤§ä¸ˆå¤«ã€‚ã‚ãªãŸã¯ã‚‚ã†â€œæ„›ã•ã‚Œç›´ã™æº–å‚™â€ãŒã§ãã¦ã„ã¾ã™ã€‚å°ã•ãªä¸€æ­©ã§ã€ã‚„ã•ã—ã„ã”ç¸ãŒå‹•ãå‡ºã—ã¾ã™ã€‚","ç¬‘é¡”ã«æ¸©åº¦ãŒæˆ»ã‚‹æ—¥ã€‚ã‚ãªãŸã®èª å®Ÿã•ã«æƒ¹ã‹ã‚Œã‚‹äººãŒã€ã‚†ã£ãã‚Šã¨è¿‘ã¥ã„ã¦ã„ã¾ã™ã€‚è‡ªåˆ†ã‚’å¤§åˆ‡ã«ã—ã¦ã€å—ã‘å–ã‚‹æº–å‚™ã‚’ã€‚"],
    neutral: ["ç„¦ã‚‰ãªãã¦ã„ã„ã€‚ä»Šæ—¥ã¯â€œæ•´ãˆã‚‹æ—¥â€ã€‚å¿ƒã¨ç”Ÿæ´»ã‚’ãã‚‹ã£ã¨ä¸€å‘¨ã€ã‚„ã•ã—ãç‚¹æ¤œã€‚æ•´ã†ã»ã©ã€ã”ç¸ã¯é™ã‹ã«å¯„ã£ã¦ãã¾ã™ã€‚","éå»ã¯â€œå­¦ã³â€ã«å¤‰ã‚ã£ã¦ã„ã¾ã™ã€‚ã‚ãªãŸã®å„ªã—ã•ã¯ä¾¡å€¤ã€‚å°ã•ãªè‡ªå·±è‚¯å®šã‚’ç©ã¿ä¸Šã’ã¾ã—ã‚‡ã†ã€‚"],
    low: ["ä»Šæ—¥ã¯å®ˆã‚Šã®æ—¥ã€‚ç„¡ç†ã›ãšå®‰å¿ƒã‚’æœ€å„ªå…ˆã«ã€‚ã»ã‚“ã®å°‘ã—ã®è‡ªå·±ã‚±ã‚¢ãŒã€æ˜æ—¥ã‚’è»½ãã—ã¾ã™ã€‚","ã¤ã‚‰ã„è¨˜æ†¶ãŒé¡”ã‚’å‡ºã—ãŸã‚‰æ·±å‘¼å¸ã‚’3å›ã€‚éå»ã¯ã‚ãªãŸã®ä¾¡å€¤ã‚’æ±ºã‚ã¾ã›ã‚“ã€‚ä»Šã“ã“ã‹ã‚‰ã€ã¾ãŸæ„›ã•ã‚Œã¦ã„ã‘ã¾ã™ã€‚"]
  };

  function safeParam(url,key,val){ try{ const u=new URL(url,location.href); u.searchParams.set(key,val); return u.toString(); }catch{ return url; } }

  /* â˜…â˜…â˜… ã“ã“ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«å…¬é–‹ â˜…â˜…â˜… */
  window.draw = function(){
    const area = document.querySelector("#resultArea");
    area.hidden = false;

    const [rank,msg] = pick(TOTAL);
    document.querySelector("#total").textContent = `${rank}ã€€${msg}`;

    const stars = document.querySelector("#stars");
    stars.innerHTML = "";
    const level = { "å¤§å‰":5, "ä¸­å‰":4, "å°å‰":3, "å‰":3, "æœ«å‰":2, "å‡¶":1 }[rank] || 3;
    range(level).forEach(()=>{ const t=document.createElement("span"); t.className="tag"; t.textContent="ğŸ’–"; stars.appendChild(t); });

    document.querySelector("#love").textContent  = pick(LOVE);
    document.querySelector("#work").textContent  = pick(WORK);
    document.querySelector("#money").textContent = pick(MONEY);

    const lucky = document.querySelector("#lucky"); lucky.innerHTML="";
    [["ğŸ¨ ã‚«ãƒ©ãƒ¼", pick(COLORS)], ["ğŸ ã‚¢ã‚¤ãƒ†ãƒ ", pick(ITEMS)], ["ğŸ“ ã‚¹ãƒãƒƒãƒˆ", pick(SPOTS)]].forEach(([label,val])=>{
      const tag=document.createElement("span"); tag.className="tag"; tag.textContent=`${label}: ${val}`; lucky.appendChild(tag);
    });

    document.querySelector("#advice").textContent = pick(ADVICES);

    const box=document.querySelector("#specialBox"), msgBox=document.querySelector("#specialMsg");
    let bucket="neutral"; if(rank==="å¤§å‰"||rank==="ä¸­å‰") bucket="good"; if(rank==="æœ«å‰"||rank==="å‡¶") bucket="low";
    msgBox.textContent = pick(SPECIAL[bucket]); box.hidden = false;

    document.querySelector("#againBtn").disabled=false;
    document.querySelector("#shareBtn").disabled=false;

    const app=document.querySelector("#ctaApp"), con=document.querySelector("#ctaConsult");
    if(app) app.href = safeParam(app.href,"rank",rank);
    if(con) con.href = safeParam(con.href,"rank",rank);
  };

  // å…±æœ‰ãƒœã‚¿ãƒ³
  document.addEventListener("DOMContentLoaded", ()=>{
    const sb = document.querySelector("#shareBtn");
    if(!sb) return;
    sb.addEventListener("click", async ()=>{
      const text = `â¤ã¿ã¿ã¡ã‚ƒã‚“å ã„â¤\n${document.querySelector("#total").textContent}\n`
        + `ğŸ’˜ ${document.querySelector("#love").textContent}\nğŸ’¼ ${document.querySelector("#work").textContent}\nğŸ’° ${document.querySelector("#money").textContent}\n`
        + `ğŸ¨/ğŸ/ğŸ“ ${document.querySelector("#lucky").innerText}\nğŸª„ ${document.querySelector("#advice").textContent}\n`;
      if(navigator.share){ try{ await navigator.share({text}); }catch(e){} }
      else if(navigator.clipboard){ await navigator.clipboard.writeText(text); alert("çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸã€‚SNSã«è²¼ã‚Šä»˜ã‘ã¦ã‚·ã‚§ã‚¢ã§ãã¾ã™âœ¨"); }
      else{ prompt("çµæœã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ã£ã¦ãã ã•ã„ğŸ‘‡", text); }
    });
  });
})();
</script>
